######################################################
#                   MANDATORY FIELDS
######################################################
name: instructlab/skills

######################################################
#                   RESERVED FIELDS
######################################################
blocks:
  - name: generator
    type: watsonx
    model_id_or_path: mistralai/mistral-medium-2505
    temperature: 0.5
    max_new_tokens: 1024
  - name: validator
    type: lm_judge
    filter: true
    lm_config:
      type: watsonx
      model_id_or_path: mistralai/mistral-medium-2505
      temperature: 0.5
      max_new_tokens: 1024
  - name: tagger
    type: magpie_tag
    input_map:
      instruction: magpie_input
      response: magpie_output
    output_map:
      magpie_tags: tags
    lm_config:
      type: watsonx
      model_id_or_path: mistralai/mistral-medium-2505
      temperature: 0.0
      max_new_tokens: 512
      stop: ["Q:"]
    tag_task: all
  - name: dedup
    type: magpie_distance
    input_map:
      instruction: magpie_input
      tags: magpie_tags
    output_map:
      magpie_tags: tags
  - name: filter
    type: magpie_filter
    # Filter out invalid data points
    filter: true
    # Magpie filter attributes
    filter_type: all
    filter_criteria:
      input_quality: ["good", "excellent"]
      sample_quality: ["4", "5"]
    remove_duplicates: True
    input_map:
      instruction: magpie_input
      response: magpie_output
      tags: field
      id: id
postprocessors:
  - name: dedup
  - name: filter

metadata:
  version: 2025.09.19
